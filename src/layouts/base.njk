

<!DOCTYPE html>
<!-- {{page.inputPath}} -->
<html lang="en">
  <head>
    <title>
      {{-  title  | escape }}
      {%- if title %} | {{ site.name }}
      {%- else -%}
        {{- site.name -}}
      {%- endif -%}
    </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% if not draft -%}
      <meta name="buildtime" content="{{site.buildtime | readableDateTime}}">
      {% include "gitinfo.njk" %}
      <meta name="date.created" content="{{page.date}}"/>
      <meta name="date.updated" content="{{lastModified}}"/>
      {% include "meta-head.njk" -%}
    {%- endif %}

    <link rel="canonical" href="{{ page.url | url | absoluteUrl(site.url) }}"/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link rel="icon" type= “image/x-icon” href="/images/favicon.ico">


      {# this pulls in the alpine.js #}
      {% bundledjs %}

      {# capture the JS content as a Nunjucks variable  #}
      {% set js %}
      function setUp() {
        let links = document.querySelectorAll("a");
        let link = null;
        for (let i = 0; i < links.length; i++) {
          link = links[i];
          /*footnote links live within <sup> elements*/ if (
            link.parentNode.nodeName == "SUP"
          ) {
            continue;
          }
          /*footnotes (which have a return link) have "footnote-backref" class*/ if (
            link.classList.contains("footnote-backref")
          ) {
            continue;
          }
          /*<a href="xxx"><em>link text</em></a> means we have to give the href to the <em> as it will be the event target*/ link.setAttribute(
            "x-on:click.prevent",
            `$dispatch('flash','${link.href}')`
          );
        }
        return { show: false };
      }
      function changePage(e) {
        setTimeout(() => (location.href = e.detail), 450);
      }
      {% endset %}
       {# feed it through our jsmin filter to minify  #}
       <script>{{ js | jsmin | safe }}</script>





    {% bundledcss "head" %}
  </head>
  <body
    x-cloak
    x-data="setUp();"
    @load.window="setTimeout(function(){ show = true}, 500)"
    @flash.window="show = false;changePage($event)"
    x-show.transition.opacity.duration.450ms="show"
  >
    <div
    class="layout-wrapper"
    {% if banner %} style="background-image: url('{{ banner.src }}')"{% endif %}>

      <header class="header">
        <div class="header__content">
          <h1 class="site-title">
            <a href={{ "/" | url }}>
              {{site.name}}
            </a>
          </h1>
          {% include "header-links.njk" -%}
        </div>
      </header>


      <main class="main">
        {% block content %}{% endblock content %}
      </main>

      <footer class="footer">
        <div class="footer__content">
          {% if banner %}{{ banner.attribute | safe }}
          {% endif %}

          {% include "footer-links.njk" %}
        </div>

      </footer>
    </div>


    {% clickystats %}

    {% bundledcss "foot" %}
  </body>
</html>
